# Feb 9, 2026 - Lust Rentals App Fixes & Dashboard Launch

## Major Accomplishments
- **App Recovery:** Restored `http://100.78.223.120:8000` by fixing missing `fastapi`/`flask` dependencies and architecture conflicts.
- **Excel Export Overhaul:** Fixed "Property Expense Breakdown" sheet.
  - Now lists **ALL** expense categories for every property (even if $0.00).
  - Changed format to requested 3-column layout: **Property Name | Expense Type | Amount**.
- **Interactive Dashboard:** Built and launched `/dashboard`.
  - Features: Summary cards, expense pie chart, property drill-down, year selector.
  - Added global navigation bar to link back to other app sections.
- **Category Override Fix:** Fixed critical bug where Dashboard and Exports ignored manual category changes.
  - Updated SQL queries to `LEFT JOIN` with `expense_overrides` table.
  - TRAVEL expenses now correctly appear in all reports.
- **Transaction Creation:** Added ability to create **new** expenses from scratch.
  - Backend: Added `POST /review/create-expense` endpoint.
  - Frontend: Fixed "Transactions" page "Save" button logic to handle new vs. edit modes correctly (solved "string pattern" error).

## Key Decisions
- **Dashboard Architecture:** Implemented as a single self-contained route (`src/api/routes/dashboard.py`) serving HTML/JS directly for simplicity and speed.
- **Export Logic:** Forced inclusion of all categories (from master list) in Excel export to ensure consistent 3-column format for every property, aiding tax prep.
- **Database Querying:** Modified data fetching to always attach and query the `overrides.db` to ensure user edits (recategorizations) are respected in all views.

## Next Steps
- Monitor for any further reporting discrepancies.
- User to continue adding TRAVEL expenses via the new "Add Transaction" feature.

## Evening Follow-Up
- Investigated Excel export regressions where new categories vanished from the Property Expense Breakdown sheet. Root cause: the exporter only iterated master CATEGORY_DISPLAY_NAMES, so any newer categories were dropped.
- Updated `src/api/routes/exports.py` to union the master list with actual `expenses_df['category_display']` values and trimmed grouped indices, guaranteeing every real category (plus $0 placeholders) shows up per property.
- Test suite (`pytest tests/test_tax_reporter.py`) still fails for pre-existing reasons (missing `src.data_processing.review_manager`). Flagged for future cleanup.
